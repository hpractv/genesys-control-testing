<html>
  <title>Popup Tool</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="library.js" defer></script>
  <script defer>
    const init = async () => {
      await gct.init(
        gct.DATALOAD.NONE,
        gct.BROADCAST_SENDER.POPUP,
        receiveBroadcastMessage,
      );
      await gct.sendBroadcast({
        action: gct.MESSAGE_ACTIONS.REQUEST_POPUP_CONTROL_DATA,
      });
    };

    const receiveBroadcastMessage = async (sender, message) => {
      if (
        sender === gct.BROADCAST_SENDER.INTERACTION ||
        sender === gct.BROADCAST_SENDER.AGENT_SCRIPT
      ) {
        if (message.action === gct.MESSAGE_ACTIONS.SET_POPUP_CONTROL_DATA) {
          document.getElementById('popupHeader').innerText = message.title;
          document.getElementById('participant').innerText =
            message.participant;
          document.getElementById('popupContent').innerText = message.content;
        }
      }
    };

    window.onload = init;
  </script>
  <body>
    <div class="popupContainer">
      <div id="popupHeader" class="popupHeader"></div>
      <div id="participant" class="popupParticipant"></div>
      <div id="popupContent" class="popupContent"></div>
    </div>
  </body>
</html>
